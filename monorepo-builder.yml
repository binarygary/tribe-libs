parameters:
  enable_default_release_workers: true

  package_directories:
    - 'src'

  # for "merge" command
  merge_sections:
    - 'require'
    - 'require-dev'
    - 'autoload'
    - 'autoload-dev'
    - 'repositories'

  data_to_append:
    autoload-dev:
      psr-4:
        'Tribe\Libs\Dev\Monorepo\': 'dev/monorepo/src'
        'Tribe\Libs\': 'tests/integration/Tribe/Libs'
    require-dev:
      symplify/monorepo-builder: "^6.0"
      lucatume/wp-browser: "^2.3.4"
      phpunit/phpunit: "^8.0"
      phpstan/phpstan: "^0.12.25"
      szepeviktor/phpstan-wordpress: "^0.6.0"
      wp-cli/wp-cli: "^2.4"

  # for "split" command
  directories_to_repositories:
    src/ACF: "git@github.com:moderntribe/square1-acf.git"
    src/Assets: "git@github.com:moderntribe/square1-assets.git"
    src/Blog_Copier: "git@github.com:moderntribe/square1-blog-copier.git"
    src/Cache: "git@github.com:moderntribe/square1-cache.git"
    src/CLI: "git@github.com:moderntribe/square1-cli.git"
    src/Container: "git@github.com:moderntribe/square1-container.git"
    src/Generators: "git@github.com:moderntribe/square1-generators.git"
    src/Media: "git@github.com:moderntribe/square1-media.git"
    src/Nav: "git@github.com:moderntribe/square1-nav.git"
    src/Object_Meta: "git@github.com:moderntribe/square1-object-meta.git"
    src/Oembed: "git@github.com:moderntribe/square1-oembed.git"
    src/P2P: "git@github.com:moderntribe/square1-p2p.git"
    src/Post_Meta: "git@github.com:moderntribe/square1-post-meta.git"
    src/Post_Type: "git@github.com:moderntribe/square1-post-type.git"
    src/Queues: "git@github.com:moderntribe/square1-queues.git"
    src/Queues_Mysql: "git@github.com:moderntribe/square1-queues-mysql.git"
    src/Required_Page: "git@github.com:moderntribe/square1-required-page.git"
    src/Schema: "git@github.com:moderntribe/square1-schema.git"
    src/Settings: "git@github.com:moderntribe/square1-settings.git"
    src/Taxonomy: "git@github.com:moderntribe/square1-taxonomy.git"
    src/User: "git@github.com:moderntribe/square1-user.git"
    src/Utils: "git@github.com:moderntribe/square1-utils.git"
    src/Whoops: "git@github.com:moderntribe/square1-whoops.git"

services:
  _defaults:
    autowire: true

  Tribe\Libs\Dev\Monorepo\:
    resource: "./dev/monorepo/src/"
